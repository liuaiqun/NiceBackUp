<?xml version="1.0" encoding="UTF-8"?>

<openerp>
	<data>
		
		<record id='company_retirement_age' model='ir.ui.view'>
			<field name='name'>company.retirement.age</field>
			<field name='model'>res.company</field>
			<field name='inherit_id' ref='base.view_company_form' />
			<field name ='arch' type='xml'>
				<xpath expr='//group[@string="Accounting"]' position='after'>
					<group string='Retirement'>
						<field name='retirement_age' />
					</group>
				</xpath>
			</field>
		</record>

		<record id='employee_retirement_age' model='ir.ui.view'>
			<field name='name'>employee.retirement.age</field>
			<field name='model'>hr.employee</field>
			<field name='inherit_id' ref='hr.view_employee_form'/>
			<field name='arch' type='xml'>
				<xpath expr="//label[@for='name']" position="before">
					<label for="title" class="oe_edit_only"/>
                    <field name="title" />
				</xpath>
				<xpath expr="//field[@name='country_id']" position="before">
					<field name="employee_id" />
				</xpath>
				<xpath expr="//field[@name='bank_account_id']" position="before">
	                <field name="pf_status" />
	                <field name="esic_status"/>
	                <field name="tds"/>
	            </xpath>
	            <xpath expr="//field[@name='passport_id']" position='before'>
	            	<field name="blood_group"/>
	            	<field name="is_a_donor"/>
	            	<field name="qualification"/>
	            	<field name="religion"/>
	            	<field name="category"/>
	            </xpath>
	            
	            <field name="marital" position="after">
	            	<field name="anniversary"/>
	            </field>

	            <xpath expr='//group[@string="Status"]' position='before'>
	            	<group string="Provident Fund" attrs='{"invisible":[("pf_status", "=", "no")]}'>
						<field name="provident_fund_no"  attrs='{"required":[("pf_status", "=", "yes")]}'/>
						<field name="pf_ac_no" />
					</group>
					<group string="ESIC Details" attrs='{"invisible":[("esic_status", "=", "no")]}'>
						<field name="esic_no" attrs='{"required":[("esic_status", "=", "yes")]}'/>
						<field name="esic_office" attrs='{"required":[("esic_status", "=", "yes")]}'/>
						<field name="esic_dispansary" attrs='{"required":[("esic_status", "=", "yes")]}'/>
						<field name="esic_emp_code" attrs='{"required":[("esic_status", "=", "yes")]}'/>
					</group>					
					<group string="TDS" attrs='{"invisible":[("tds", "=", "no")]}'>
						<field name="tds_perc"/>
					</group>
					<group string="Emergency Contact Details">
						<field name="contact_person_1"/>
						<field name="contact_relationship_1"/>
						<field name="contact_mobile_1"/>
						<field name="contact_person_2"/>
						<field name="contact_relationship_2"/>
						<field name="contact_mobile_2"/>
					</group>
	            </xpath>
				<xpath expr='//group[@string="Birth"]' position='after'>
					<group string='Retirement Details'>
						<field name='age'/>
						<field name='company_retire_age'/>
						<field name='expected_retire_year'/>
						<field name='years_of_service'/>
					</group>
				</xpath>
			</field>
		</record>

		<record id="esic_employer_name_action" model="ir.actions.act_window">
			<field name="name">ESIC Employer Code</field>
			<field name="res_model">esic.emp.code</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">
					Click to create a new Reason.
				</p>
			</field>
		</record>

		<record id="esic_employer_name_form" model="ir.ui.view">
			<field name="name">ESIC Employer Code</field>
			<field name="model">esic.emp.code</field>
			<field name="arch" type="xml">
				<form>
					<group>
						<group>
							<field name="name"/>
							<field name="place"/>
						</group>
					</group>
				</form>
			</field>
		</record>

		<record id="esic_employer_name_tree" model="ir.ui.view">
			<field name="name">ESIC Employer Code</field>
			<field name="model">esic.emp.code</field>
			<field name="arch" type="xml">
				<tree editable="bottom">
					<field name="name" required='1'/>
					<field name="place" required='1'/>
				</tree>
			</field>
		</record>

		<record model="ir.ui.view" id="edit_holiday_new_cust">
			<field name="name">Leave Request</field>
			<field name="model">hr.holidays</field>
			<field name="inherit_id" ref="hr_holidays.edit_holiday_new"/>
			<field name="arch" type="xml">

				<header position="replace">
					<header>
	                    <button string="Confirm" name="confirm" states="draft" type="workflow" class="oe_highlight"/>
	                    <button string="Sanction" name="validate" type="workflow" class="oe_highlight" attrs="{'invisible':['|', ('is_manager', '=', False), ('state', '!=', 'confirm')]}"/>
	                    <button string="Approve" name="second_validate" states="validate1" type="workflow" groups="base.group_hr_user" class="oe_highlight"/>
	                    <button string="Refuse/Cancel" name="refuse" states="confirm,validate,validate1" type="workflow" attrs="{'invisible':['|', ('is_manager', '=', False), ('state', '!=', 'confirm')]}"/>
	                    <button string="Reset to Draft" name="reset" type="workflow"
	                            attrs="{'invisible': ['|', ('can_reset', '=', False), ('state', 'not in', ['confirm', 'refuse'])]}"/>
	                    <field name="state" widget="statusbar" statusbar_visible="draft,confirm,validate" statusbar_colors='{"confirm":"blue","validate1":"blue","refuse":"red"}'/>
	                </header>			
                </header>
				
                <field name="name" position="replace"/>
                <field name="holiday_status_id" position="replace"/>

                <xpath expr="//label[@string='Duration']" position="before">
                	<field name="holiday_status_id" context="{'employee_id':employee_id}"/>
                	<field name="name" attrs="{'readonly':[('state','!=','draft'),('state','!=','confirm')], 'required': [('type', '=', 'add')]}"/>
                </xpath>

				<field name="holiday_type" position="before">
					<field name="doc_created" attrs="{'readonly':[('state', 'not in', ('draft', 'confirm'))]}"/>
					<field name="approved_date" attrs="{'readonly':[('state', 'not in', ('draft', 'confirm'))], 'invisible':[('state', 'in', ('draft', 'confirm', 'cancel'))]}"/> 
					<field name="is_manager" invisible="1"/>
				</field>

			</field>
		</record>

		<record id="view_holiday_cust" model="ir.ui.view">
			<field name="name">hr.holidays.tree</field>
			<field name="model">hr.holidays</field>
			<field name="inherit_id" ref="hr_holidays.view_holiday"/>
			<field name="arch" type="xml">
				<field name="date_from" position="before">
					<field name="doc_created"/>
				</field>
			</field>
		</record>

		<record id="edit_holiday_status_form_cust" model="ir.ui.view">
			<field name="name">hr.holidays.status</field>
			<field name="model">hr.holidays.status</field>
			<field name="inherit_id" ref="hr_holidays.edit_holiday_status_form"/>
			<field name="arch" type="xml">
				<field name="categ_id" position="after">
					<field name="description" />
				</field>
			</field>
		</record>
		
		<record id="request_sanction_holidays" model="ir.actions.act_window">
			<field name="name">Request To Sanction</field>
			<field name="res_model">hr.holidays</field>
			<field name="view_type">form</field>
			<field name="domain">[('type', '=', 'remove'),('state', '=', 'confirm')]</field>
		</record>

		<record id="hr_holidays.menu_request_approve_holidays" model="ir.ui.menu">
			<field name="sequence">11</field>
		</record>

		<record id="hr_holidays.menu_open_allocation_holidays" model="ir.ui.menu">
			<field name="sequence">12</field>
		</record>

		<record id="hr_holidays.menu_request_approve_allocation" model="ir.ui.menu">
			<field name="sequence">13</field>
		</record>

		<menuitem id="leave_manager_approval" name="Leaves To Sanction" parent="hr_holidays.menu_open_ask_holidays" action="request_sanction_holidays" sequence="10"/>
		<menuitem id="esic_employer_name_name" name="ESIC Employer" parent="hr.menu_hr_configuration" action="esic_employer_name_action" />
	</data>
</openerp>